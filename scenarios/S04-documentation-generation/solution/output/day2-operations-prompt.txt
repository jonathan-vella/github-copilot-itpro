# Generate Day 2 Operations Guide for Azure Resources

Please create a comprehensive **Day 2 Operations Guide** for the following Azure resources deployed in resource group **rg-contoso-patient-portal-dev**:

## Deployed Resources

- **Microsoft.Network/networkSecurityGroups** (3 instance(s))
  - Name: `nsg-data-dev-qkfwso`, Location: `swedencentral`
  - Name: `nsg-web-dev-qkfwso`, Location: `swedencentral`
  - Name: `vnet-contosopat-dev-qkfwso-snet-privateendpoints-dev-nsg-swedencentral`, Location: `swedencentral`
- **Microsoft.Network/networkInterfaces** (2 instance(s))
  - Name: `pe-sqlserver-dev-qkfwso.nic.2452ca69-7f5e-4505-b393-c8087fa23188`, Location: `swedencentral`
  - Name: `pe-keyvault-dev-qkfwso.nic.caf77a4e-ae78-4d34-89d4-17f3838ecd40`, Location: `swedencentral`
- **Microsoft.Network/privateDnsZones** (2 instance(s))
  - Name: `privatelink.database.windows.net`, Location: `global`
  - Name: `privatelink.vaultcore.azure.net`, Location: `global`
- **Microsoft.Network/privateDnsZones/virtualNetworkLinks** (2 instance(s))
  - Name: `privatelink.database.windows.net/link-to-vnet`, Location: `global`
  - Name: `privatelink.vaultcore.azure.net/link-to-vnet`, Location: `global`
- **Microsoft.Network/privateEndpoints** (2 instance(s))
  - Name: `pe-keyvault-dev-qkfwso`, Location: `swedencentral`
  - Name: `pe-sqlserver-dev-qkfwso`, Location: `swedencentral`
- **Microsoft.Sql/servers/databases** (2 instance(s))
  - Name: `sql-contosopat-dev-qkfwso/master`, SKU: `GP_SYSTEM`, Location: `swedencentral`
  - Name: `sql-contosopat-dev-qkfwso/sqldb-patients-dev-qkfwso`, SKU: `Standard`, Location: `swedencentral`
- **microsoft.alertsmanagement/smartDetectorAlertRules** (1 instance(s))
  - Name: `Failure Anomalies - appi-contosopa-dev-qkfwso`, Location: `global`
- **Microsoft.Insights/components** (1 instance(s))
  - Name: `appi-contosopa-dev-qkfwso`, Location: `swedencentral`
- **Microsoft.KeyVault/vaults** (1 instance(s))
  - Name: `kv-contosop-dev-qkfwso`, Location: `swedencentral`
- **Microsoft.Network/virtualNetworks** (1 instance(s))
  - Name: `vnet-contosopat-dev-qkfwso`, Location: `swedencentral`
- **Microsoft.OperationalInsights/workspaces** (1 instance(s))
  - Name: `log-contosopat-dev-qkfwso`, Location: `swedencentral`
- **Microsoft.Sql/servers** (1 instance(s))
  - Name: `sql-contosopat-dev-qkfwso`, Location: `swedencentral`
- **Microsoft.Web/serverFarms** (1 instance(s))
  - Name: `asp-contosopat-dev-qkfwso`, SKU: `P1v2`, Location: `swedencentral`
- **Microsoft.Web/sites** (1 instance(s))
  - Name: `app-contosopat-dev-qkfwso`, Location: `swedencentral`


## Required Documentation Sections

### 1. Daily Operations Checklist
- Morning health checks
- Performance monitoring tasks
- Security audit items
- Cost review procedures

### 2. Weekly Maintenance Tasks
- Backup verification
- Update management
- Performance optimization
- Security patching schedule

### 3. Monthly Operations
- Capacity planning review
- Cost optimization analysis
- Disaster recovery testing
- Compliance audits

### 4. Monitoring & Alerting Setup

For each resource type, provide:
- **Key Metrics to Monitor**: CPU, memory, latency, errors, availability
- **Recommended Thresholds**: When to alert (e.g., >80% CPU for 5 minutes)
- **Azure Monitor Queries**: KQL queries for common scenarios
- **Alert Action Groups**: Who to notify and how

Example format:
```markdown
#### App Service Monitoring
- **CPU Percentage**: Alert when >80% for 5+ minutes
- **Memory Percentage**: Alert when >85% for 5+ minutes
- **HTTP 5xx Errors**: Alert when >10 errors in 5 minutes
- **Response Time**: Alert when P95 >3 seconds

**KQL Query**:
\\\kql
AzureMetrics
| where ResourceProvider == "MICROSOFT.WEB"
| where MetricName == "CpuPercentage"
| summarize avg(Average) by bin(TimeGenerated, 5m)
| where avg_Average > 80
\\\
```

### 5. Backup & Recovery Procedures

For each resource type, document:
- **Backup Strategy**: What to backup, how often, retention period
- **Backup Validation**: How to verify backups are working
- **Recovery Procedures**: Step-by-step restore process
- **Recovery Time Objective (RTO)**: Target recovery time
- **Recovery Point Objective (RPO)**: Acceptable data loss window

### 6. Scaling Procedures

For each scalable resource, provide:
- **Current Configuration**: Current SKU/tier and limits
- **Scaling Triggers**: When to scale (metrics-based)
- **Scale-Up Procedure**: How to increase capacity
- **Scale-Down Procedure**: How to decrease capacity safely
- **Cost Impact**: Cost difference between tiers

### 7. Security Operations

- **Access Review**: How to audit who has access
- **Key Rotation**: Schedule and procedure for rotating secrets/keys
- **Vulnerability Scanning**: How to scan for security issues
- **Compliance Checks**: Azure Policy compliance monitoring
- **Network Security**: NSG rules review, private endpoint validation

### 8. Cost Management

- **Current Cost**: Approximate monthly cost per resource
- **Cost Optimization Opportunities**: Reserved instances, spot instances, right-sizing
- **Budget Alerts**: Recommended budget thresholds
- **Cost Allocation Tags**: Tag strategy for cost tracking

### 9. Troubleshooting Playbooks

For common issues with each resource type, provide:
- **Issue**: Description of the problem
- **Symptoms**: How to identify the issue
- **Diagnostic Steps**: Queries/commands to run
- **Resolution**: Step-by-step fix
- **Prevention**: How to avoid recurrence

### 10. Automation Opportunities

Identify tasks that should be automated:
- Backup jobs
- Certificate renewals
- Log retention cleanup
- Resource scaling
- Health checks
- Compliance scanning

Provide sample PowerShell/CLI scripts for automation.

### 11. Runbook Links & Resources

- Link to Azure documentation for each resource type
- Link to architecture documentation
- Link to troubleshooting guides
- On-call escalation procedures
- Vendor support contacts

## Output Format

- Use **Markdown** with clear headers and sections
- Include **code blocks** for scripts and queries
- Use **tables** for checklists and schedules
- Include **diagrams** (Mermaid) where helpful
- Provide **actionable** guidance (not just theory)
- Include **real examples** based on the specific resources listed

## Additional Guidelines

- Assume the audience is an IT operations team familiar with Azure basics
- Focus on **practical, actionable** tasks
- Include **time estimates** for each task (e.g., "Daily health check: 15 minutes")
- Highlight **automation opportunities** throughout
- Emphasize **proactive** monitoring over reactive troubleshooting
- Include **cost considerations** for scaling decisions

---

Please generate a complete Day 2 Operations Guide following this structure. Make it comprehensive but practical for daily use by an operations team.
