# Azure Load Testing Configuration
# Baseline test: 100 concurrent users, 5 minutes
# Target: SAIF API v2 endpoints

version: v0.1
testName: s05-baseline-load-test
displayName: S05 Service Validation - Baseline Load Test
description: Baseline load test with 100 concurrent users validating API performance

# Test execution configuration
testPlan: load-test.jmx
configurationFiles: []

# Load configuration
engineInstances: 1

# Test parameters
properties:
  userPropertyFile: load-test.properties

# Environment variables (injected by script)
env:
  - name: API_URL
    value: ""  # Set by Run-LoadTest.ps1
  - name: TEST_DURATION
    value: "300"  # 5 minutes
  - name: CONCURRENT_USERS
    value: "100"
  - name: RAMP_UP_TIME
    value: "30"  # seconds

# Failure criteria
failureCriteria:
  - metricName: response_time_ms_p95
    condition: avg > 500
    value: 500
    action: continue
    
  - metricName: error_rate_pct
    condition: avg > 1
    value: 1
    action: stop
    
  - metricName: requests_per_sec
    condition: avg < 100
    value: 100
    action: continue

# Auto-stop configuration
autoStop:
  errorRate: 50
  timeWindow: 60

# Network configuration
networkProfile:
  # No network throttling for baseline
  downloadBandwidth: 0
  uploadBandwidth: 0

# Secrets (use Key Vault references)
secrets: []

# CSV data sets (if needed for parameterized tests)
csvDataSets: []
